---
import type { HTMLAttributes } from 'astro/types';
import type { WithChildren } from '../../types.ts';
import Card from './Card.astro';

/**
 * Props for a textarea with auto-resize and custom scrollbar styling.
 *
 * Explicitly disallows children as textarea content is controlled by value.
 */
type Props = WithChildren<false, HTMLAttributes<'textarea'>>;

const props = Astro.props;
---

<Card as="textarea" {...props} />

<style>
	textarea {
		min-height: 18rem;
		max-height: var(--max-w);
		border: none;
		padding: var(--p-md);
		background-color: var(--bg-2);
		color: var(--fg);
		font-family: var(--font-base);
		font-size: var(--font-md);
		font-weight: var(--normal);
		transition-duration: var(--duration-md);
		resize: block;
		view-transition-name: input;
		line-height: inherit;
		/* Revert `overflow:hidden` set by Card */
		overflow-y: auto;
		contain: strict;

		&:focus {
			background-color: var(--bg-3);
		}

		&:disabled {
			opacity: var(--opacity-md);
		}

		&::-webkit-scrollbar {
			width: var(--p-xs);
		}

		&::-webkit-scrollbar-thumb {
			border-radius: var(--radius-md);
			background-color: var(--fg);
			box-shadow: var(--box-shadow-md);
			cursor: pointer;
		}

		&::placeholder {
			color: color-mix(
				in oklch shorter hue,
				var(--fg),
				transparent var(--mix-lg)
			);
		}
	}
</style>
