<!--
paper-char-counter

Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE
-->

<link href="../polymer/polymer.html" rel="import">
<link href="../core-style/core-style.html" rel="import">

<polymer-element name="paper-char-counter">
<template>
	<style>
		:host {
			display: inline-block;
			float: right;
			color: transparent;
			font-size: 1em;
			padding: .5em 0 .5em .5em;
			transition: 1s
		}
	</style>
	<core-style ref="paper-char-counter"></core-style>
	<div class="counter-text" aria-hidden="true" hidden?="{{!showCounter}}">
		<span>{{_charCount}}</span>
	</div>
</template>

<script>
	Polymer({
		publish: {
			/* The id of the textinput or textarea that should be monitored.
					@attribute target, @type string, @default null */
			target: null,

			/* If false, don't show the character counter. Used in conjunction with `paper-input-decorator's` `error` field.
					@attribute showCounter, @type boolean, @default true */
			showCounter: true
		},

		/* Number of characters in the current input */
		_charCount: 0,

		ready: function() {
			var T = this;
			if (!T.target) return;
			document.getElementById(T.target).addEventListener('input', T.inputAction.bind(T))
		},

		inputAction: function(e) {
			var T = this, S = document.getElementsByClassName("stripe"), Col, Tr = "transparent", Bl = "#03a9f4";
				T._charCount = C = e.target.value.length;

			if (C >= 100 && C < 200) {Col = "#00bcd4"}
			else if (C >= 200 && C < 400) {Col = "#009688"}
			else if (C >= 400 && C < 700) {Col = "#4caf50"}
			else if (C >= 700 && C < 1100) {Col = "#8bc34a"}
			else if (C >= 1100 && C < 1600) {Col = "#cddc39"}
			else if (C >= 1600 && C < 2200) {Col = "#ffeb3b"}
			else if (C >= 2200 && C < 2900) {Col = "#ffc107"}
			else if (C >= 2900 && C < 3700) {Col = "#ff9800"}
			else if (C >= 3700 && C < 4600) {Col = "#ff5722"}
			else if (C >= 4600) {Col = "#f44336"}
			else if (C < 1) {Col = Tr}
			else {Col = Bl}
			if (Col === Tr) {
				T.style.color = Col;
				S[0].style.backgroundColor = S[1].style.backgroundColor = Bl
			}
			else {T.style.color = S[0].style.backgroundColor = S[1].style.backgroundColor = Col}
		}
	});
</script>
</polymer-element>